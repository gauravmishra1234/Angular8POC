{"version":3,"file":"ngx-infinite-scroller.js","sources":["ng://ngx-infinite-scroller/src/app/directive-state.service.ts","ng://ngx-infinite-scroller/src/app/enum/initial-scroll-position-type.enum.ts","ng://ngx-infinite-scroller/src/app/directive-context.ts","ng://ngx-infinite-scroller/src/app/scrolling-strategy/strategy-base.ts","ng://ngx-infinite-scroller/src/app/scrolling-strategy/scrolling-to-top.ts","ng://ngx-infinite-scroller/src/app/scrolling-strategy/scrolling-to-bottom.ts","ng://ngx-infinite-scroller/src/app/scrolling-strategy/scrolling-to-both.ts","ng://ngx-infinite-scroller/src/app/scroll-height-listener/scroll-height-listener.ts","ng://ngx-infinite-scroller/src/app/ngx-infinite-scroller.directive.ts","ng://ngx-infinite-scroller/src/app/ngx-infinite-scroller.module.ts","ng://ngx-infinite-scroller/ngx-infinite-scroller.ts"],"sourcesContent":["import { ElementRef } from '@angular/core';\n\nexport class DirectiveStateService {\n\n  public get scrollTop(): number {\n    return this._el.nativeElement.scrollTop;\n  }\n\n  public get scrollHeight(): number {\n    return this._el.nativeElement.scrollHeight;\n  }\n\n  public get clientHeight(): number {\n    return this._el.nativeElement.clientHeight;\n  }\n\n  public get initMode(): boolean {\n    return this._initMode;\n  }\n\n  public set initMode(initMode: boolean) {\n    this._initMode = initMode;\n  }\n\n  public get scrollStreamActive(): boolean {\n    return this._scrollStreamActive;\n  }\n\n  public set scrollStreamActive(active: boolean) {\n    this._scrollStreamActive = active;\n  }\n\n  public get previousScrollPositionpUpdated(): boolean {\n    return this._previousScrollPositionpUpdated;\n  }\n\n  public set previousScrollPositionpUpdated(previousScrollPositionpUpdated: boolean) {\n    this._previousScrollPositionpUpdated = previousScrollPositionpUpdated;\n  }\n\n  public get previousScrollTop(): number {\n    return this._previousScrollTop;\n  }\n\n  public get previousScrollHeight(): number {\n    return this._previousScrollHeight;\n  }\n\n  private _el: ElementRef;\n\n  private _initMode: boolean;\n\n  private _scrollStreamActive: boolean;\n\n  private _previousScrollPositionpUpdated: boolean;\n\n  private _previousScrollTop: number;\n\n  private _previousScrollHeight: number;\n\n  public setup(params: {\n    el: ElementRef,\n    initMode: boolean,\n    scrollStreamActive: boolean,\n    previousScrollPositionpUpdated: boolean\n  }): void {\n    this._el = params.el;\n    this._initMode = params.initMode;\n    this._scrollStreamActive = params.scrollStreamActive;\n    this._previousScrollPositionpUpdated = params.previousScrollPositionpUpdated;\n    this.updatePreviousScrollTop();\n    this.updatePreviousScrollHeight();\n  }\n\n  public updatePreviousScrollTop(): void {\n    this._previousScrollTop = this._el.nativeElement.scrollTop;\n  }\n\n  public updatePreviousScrollHeight(): void {\n    this._previousScrollHeight = this._el.nativeElement.scrollHeight;\n  }\n}\n","export enum InitialScrollPosition {\n  DEFAULT = 'DEFAULT',\n  TOP = 'TOP',\n  MIDDLE = 'MIDDLE',\n  BOTTOM = 'BOTTOM',\n}\n","import { ScrollingStrategy } from './model/scrolling-strategy.model';\n\nexport abstract class DirectiveContext {\n\n  protected scrollingStrategy: ScrollingStrategy;\n\n  constructor() { }\n}\n","import isNumber from 'is-number';\n\nimport { NgxInfiniteScrollerDirective } from '../ngx-infinite-scroller.directive';\nimport { DirectiveStateService } from '../directive-state.service';\n\nimport { ScrollPosition } from '../model/scroll-position.model';\nimport { InitialScrollPosition } from '../enum/initial-scroll-position-type.enum';\n\nexport abstract class StrategyBase {\n  constructor(\n    protected directive: NgxInfiniteScrollerDirective,\n    protected state: DirectiveStateService\n  ) { }\n\n  protected wasScrolledDown(prevPos: ScrollPosition, currentPos: ScrollPosition): boolean {\n    return prevPos.scrollTop < currentPos.scrollTop;\n  }\n\n  protected wasScrolledUp(prevPos: ScrollPosition, currentPos: ScrollPosition): boolean {\n    return !this.wasScrolledDown(prevPos, currentPos);\n  }\n\n  protected isScrollDownEnough(pos: ScrollPosition, scrollPositionTrigger: number): boolean {\n    return ((pos.scrollTop + pos.clientHeight) / pos.scrollHeight) > (scrollPositionTrigger / 100);\n  }\n\n  protected isScrollUpEnough(pos: ScrollPosition, scrollPositionTrigger: number): boolean {\n    return (pos.scrollTop / pos.scrollHeight) < (scrollPositionTrigger / 100);\n  }\n\n  protected getInitialScrollPositionValue(defaultScrollPosition: InitialScrollPosition): number {\n    const { initialScrollPosition } = this.directive;\n\n    if (isNumber(initialScrollPosition)) {\n      return Number(initialScrollPosition);\n    }\n\n    const initialScrollPositions: { [key: string]: number } = this.getInitialScrollPositions();\n\n    if (initialScrollPosition === InitialScrollPosition.DEFAULT) {\n      return initialScrollPositions[defaultScrollPosition];\n    }\n\n    return initialScrollPositions[initialScrollPosition];\n  }\n\n  private getInitialScrollPositions(): { [key: string]: number } {\n    const { scrollHeight, clientHeight } = this.state;\n\n    return {\n      [InitialScrollPosition.TOP]: 0,\n      [InitialScrollPosition.MIDDLE]: scrollHeight / 2 - clientHeight / 2,\n      [InitialScrollPosition.BOTTOM]: scrollHeight,\n    };\n  }\n}\n","import { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { StrategyBase } from './strategy-base';\n\nimport { NgxInfiniteScrollerDirective } from '../ngx-infinite-scroller.directive';\nimport { DirectiveStateService } from '../directive-state.service';\n\nimport { ScrollingStrategy } from '../model/scrolling-strategy.model';\nimport { ScrollPosition } from '../model/scroll-position.model';\nimport { InitialScrollPosition } from '../enum/initial-scroll-position-type.enum';\n\nexport class ScrollingToTop extends StrategyBase implements ScrollingStrategy {\n\n  constructor(\n    directive: NgxInfiniteScrollerDirective,\n    state: DirectiveStateService\n  ) {\n    super(directive, state);\n  }\n\n  public scrollDirectionChanged(scrollPairChanged: Observable<ScrollPosition[]>):\n    Observable<ScrollPosition[]> {\n    return scrollPairChanged.pipe(\n      filter((scrollPositions: ScrollPosition[]) => {\n        return super.wasScrolledUp(\n          scrollPositions[0],\n          scrollPositions[1]\n        );\n      })\n    );\n  }\n\n  public scrollRequestZoneChanged(scrollDirectionChanged: Observable<ScrollPosition[]>):\n    Observable<ScrollPosition[]> {\n    return scrollDirectionChanged.pipe(\n      filter((scrollPositions: ScrollPosition[]) => {\n        return super.isScrollUpEnough(\n          scrollPositions[1],\n          this.directive.scrollUpPercentilePositionTrigger\n        );\n      })\n    );\n  }\n\n  public askForUpdate(): void {\n    this.directive.onScrollUp.next();\n  }\n\n  public setInitialScrollPosition(): void {\n    const initialScrollPositionValue = super.getInitialScrollPositionValue(\n      InitialScrollPosition.BOTTOM,\n    );\n\n    this.directive.scrollTo(initialScrollPositionValue);\n  }\n\n  public setPreviousScrollPosition(): void {\n    const prevScrollPosition = this.state.previousScrollTop +\n      (this.state.scrollHeight - this.state.previousScrollHeight);\n    this.directive.scrollTo(prevScrollPosition);\n  }\n}\n","import { Observable } from 'rxjs';\nimport { filter } from 'rxjs/operators';\n\nimport { StrategyBase } from './strategy-base';\n\nimport { NgxInfiniteScrollerDirective } from '../ngx-infinite-scroller.directive';\nimport { DirectiveStateService } from '../directive-state.service';\n\nimport { ScrollingStrategy } from '../model/scrolling-strategy.model';\nimport { ScrollPosition } from '../model/scroll-position.model';\nimport { InitialScrollPosition } from '../enum/initial-scroll-position-type.enum';\n\nexport class ScrollingToBottom extends StrategyBase implements ScrollingStrategy {\n\n  constructor(\n    directive: NgxInfiniteScrollerDirective,\n    state: DirectiveStateService\n  ) {\n    super(directive, state);\n  }\n\n  public scrollDirectionChanged(scrollPairChanged: Observable<ScrollPosition[]>):\n    Observable<ScrollPosition[]> {\n    return scrollPairChanged.pipe(\n      filter((scrollPositions: ScrollPosition[]) => {\n        return super.wasScrolledDown(\n          scrollPositions[0],\n          scrollPositions[1]\n        );\n      })\n    );\n  }\n\n  public scrollRequestZoneChanged(scrollDirectionChanged: Observable<ScrollPosition[]>):\n    Observable<ScrollPosition[]> {\n    return scrollDirectionChanged.pipe(\n      filter((scrollPositions: ScrollPosition[]) => {\n        return super.isScrollDownEnough(\n          scrollPositions[1],\n          this.directive.scrollDownPercentilePositionTrigger\n        );\n      })\n    );\n  }\n\n  public askForUpdate(): void {\n    this.directive.onScrollDown.next();\n  }\n\n  public setInitialScrollPosition(): void {\n    const initialScrollPositionValue = super.getInitialScrollPositionValue(\n      InitialScrollPosition.TOP,\n    );\n\n    this.directive.scrollTo(initialScrollPositionValue);\n  }\n\n  public setPreviousScrollPosition(): void {\n    const prevScrollPosition = this.state.previousScrollTop;\n    this.directive.scrollTo(prevScrollPosition);\n  }\n}\n","import { Observable } from 'rxjs';\nimport { tap, filter } from 'rxjs/operators';\n\nimport { StrategyBase } from './strategy-base';\n\nimport { NgxInfiniteScrollerDirective } from '../ngx-infinite-scroller.directive';\nimport { DirectiveStateService } from '../directive-state.service';\n\nimport { ScrollingStrategy } from '../model/scrolling-strategy.model';\nimport { ScrollPosition } from '../model/scroll-position.model';\nimport { InitialScrollPosition } from '../enum/initial-scroll-position-type.enum';\n\nexport class ScrollingToBoth extends StrategyBase implements ScrollingStrategy {\n\n  private scrolledUp: boolean;\n\n  constructor(\n    directive: NgxInfiniteScrollerDirective,\n    state: DirectiveStateService\n  ) {\n    super(directive, state);\n  }\n\n  public scrollDirectionChanged(scrollPairChanged: Observable<ScrollPosition[]>):\n    Observable<ScrollPosition[]> {\n    return scrollPairChanged;\n  }\n\n  public scrollRequestZoneChanged(scrollDirectionChanged: Observable<ScrollPosition[]>):\n    Observable<ScrollPosition[]> {\n    return scrollDirectionChanged.pipe(\n      filter((scrollPositions: ScrollPosition[]) => {\n        return (super.isScrollUpEnough(\n          scrollPositions[1],\n          this.directive.scrollUpPercentilePositionTrigger\n        ) || super.isScrollDownEnough(\n          scrollPositions[1],\n          this.directive.scrollDownPercentilePositionTrigger\n        ));\n      }),\n      tap((scrollPositions: ScrollPosition[]) => {\n        this.scrolledUp = super.wasScrolledUp(\n          scrollPositions[0],\n          scrollPositions[1]);\n      })\n    );\n  }\n\n  public askForUpdate(): void {\n    if (this.scrolledUp) {\n      this.directive.onScrollUp.next();\n    } else {\n      this.directive.onScrollDown.next();\n    }\n  }\n\n  public setInitialScrollPosition(): void {\n    const initialScrollPositionValue = super.getInitialScrollPositionValue(\n      InitialScrollPosition.MIDDLE,\n    );\n\n    this.directive.scrollTo(initialScrollPositionValue);\n  }\n\n  public setPreviousScrollPosition(): void {\n    let prevScrollPosition;\n\n    if (this.scrolledUp) {\n      prevScrollPosition = this.state.previousScrollTop +\n        (this.state.scrollHeight - this.state.previousScrollHeight);\n    } else {\n      prevScrollPosition = this.state.previousScrollTop;\n    }\n\n    this.directive.scrollTo(prevScrollPosition);\n  }\n}\n","import { NgxInfiniteScrollerDirective } from '../ngx-infinite-scroller.directive';\nimport { DirectiveStateService } from '../directive-state.service';\n\nexport class ScrollHeightListener {\n\n  private DEFAULT_REQUEST_TIMEOUT = 30000;\n\n  private listener: number;\n\n  private httpRequestTimeout: any;\n\n  constructor(\n    private directive: NgxInfiniteScrollerDirective,\n    private state: DirectiveStateService\n  ) { }\n\n  public start(): void {\n    this.listener = window.requestAnimationFrame(this.listen.bind(this));\n\n    if (!this.httpRequestTimeout) {\n      this.httpRequestTimeout = setTimeout(\n        () => {\n          this.stopIfRequestTimeout();\n        },\n        this.DEFAULT_REQUEST_TIMEOUT\n      );\n    }\n  }\n\n  public stop(): void {\n    window.cancelAnimationFrame(this.listener);\n    clearTimeout(this.httpRequestTimeout);\n    this.httpRequestTimeout = null;\n  }\n\n  private listen(): void {\n    if (this.state.previousScrollHeight !== this.state.scrollHeight) {\n      this.stop();\n      this.directive.onScrollbarHeightChanged();\n    } else {\n      this.start();\n    }\n  }\n\n  private stopIfRequestTimeout(): void {\n    if (!this.state.previousScrollPositionpUpdated) {\n      this.stop();\n    }\n  }\n}\n","import {\r\n  Directive,\r\n  OnDestroy,\r\n  OnInit,\r\n  AfterViewInit,\r\n  ElementRef,\r\n  Input,\r\n  Output,\r\n  EventEmitter,\r\n  Renderer2,\r\n} from '@angular/core';\r\n\r\nimport { Observable, Subject, zip, fromEvent } from 'rxjs';\r\n\r\nimport { tap, map, pairwise, takeWhile, skipWhile, debounceTime } from 'rxjs/operators';\r\n\r\nimport { DirectiveStateService } from './directive-state.service';\r\n\r\nimport { ScrollPosition } from './model/scroll-position.model';\r\nimport { InitialScrollPosition } from './enum/initial-scroll-position-type.enum';\r\n\r\nimport { DirectiveContext } from './directive-context';\r\nimport { ScrollingToTop } from './scrolling-strategy/scrolling-to-top';\r\nimport { ScrollingToBottom } from './scrolling-strategy/scrolling-to-bottom';\r\nimport { ScrollingToBoth } from './scrolling-strategy/scrolling-to-both';\r\n\r\nimport { ScrollHeightListener } from './scroll-height-listener/scroll-height-listener';\r\n\r\n@Directive({\r\n  selector: '[ngxInfiniteScroller]'\r\n})\r\nexport class NgxInfiniteScrollerDirective\r\n  extends DirectiveContext\r\n  implements OnInit, AfterViewInit, OnDestroy {\r\n\r\n  @Input()\r\n  public strategy: string = 'scrollingToBottom';\r\n\r\n  @Input()\r\n  public initialScrollPosition: InitialScrollPosition | number = InitialScrollPosition.DEFAULT;\r\n\r\n  @Input()\r\n  public scrollbarAnimationInterval = 100;\r\n\r\n  @Input()\r\n  public scrollDebounceTimeAfterScrollHeightChanged = 50;\r\n\r\n  @Input()\r\n  public scrollDebounceTimeAfterDOMMutationOnInit = 1000;\r\n\r\n  @Input()\r\n  public scrollUpPercentilePositionTrigger = 2;\r\n\r\n  @Input()\r\n  public scrollDownPercentilePositionTrigger = 98;\r\n\r\n  @Output()\r\n  public onScrollUp: EventEmitter<null> = new EventEmitter<null>();\r\n\r\n  @Output()\r\n  public onScrollDown: EventEmitter<null> = new EventEmitter<null>();\r\n\r\n  private scrollHeightListener: ScrollHeightListener;\r\n\r\n  private scrollHeightChanged: Subject<null> = new Subject<null>();\r\n\r\n  private domMutationObserver: MutationObserver;\r\n\r\n  private domMutationEmitter: Subject<MutationRecord[]> = new Subject<MutationRecord[]>();\r\n\r\n  private scrollChanged: Observable<Event>;\r\n\r\n  private get scrollPairChanged(): Observable<ScrollPosition[]> {\r\n    if (this.scrollChanged) {\r\n      return this.scrollChanged.pipe(\r\n        takeWhile(() => this.state.scrollStreamActive),\r\n        map((e: any) => {\r\n          return <ScrollPosition>{\r\n            scrollHeight: e.target.scrollHeight,\r\n            scrollTop: e.target.scrollTop,\r\n            clientHeight: e.target.clientHeight,\r\n          };\r\n        }),\r\n        pairwise(),\r\n        debounceTime(this.scrollbarAnimationInterval)\r\n      );\r\n    }\r\n  }\r\n\r\n  private get scrollDirectionChanged(): Observable<ScrollPosition[]> {\r\n    return this.scrollingStrategy.scrollDirectionChanged(this.scrollPairChanged);\r\n  }\r\n\r\n  private get scrollRequestZoneChanged(): Observable<ScrollPosition[]> {\r\n    return this.scrollingStrategy.scrollRequestZoneChanged(this.scrollDirectionChanged).pipe(\r\n      tap(() => {\r\n        this.state.updatePreviousScrollTop();\r\n        this.state.updatePreviousScrollHeight();\r\n        this.state.previousScrollPositionpUpdated = false;\r\n        this.scrollHeightListener.start();\r\n      })\r\n    );\r\n  }\r\n\r\n  constructor(\r\n    private el: ElementRef,\r\n    private renderer: Renderer2,\r\n    private state: DirectiveStateService\r\n  ) {\r\n    super();\r\n    this.state.setup({\r\n      el: el,\r\n      initMode: true,\r\n      scrollStreamActive: true,\r\n      previousScrollPositionpUpdated: false\r\n    });\r\n  }\r\n\r\n  public ngOnInit(): void {\r\n    this.useStrategy();\r\n    this.useScrollHeightListener();\r\n\r\n    this.registerScrollEventHandler();\r\n    this.registerMutationObserver();\r\n    this.registerInitialScrollPostionHandler();\r\n    this.registerPreviousScrollPositionHandler();\r\n  }\r\n\r\n  public ngAfterViewInit(): void {\r\n    this.registerScrollSpy();\r\n  }\r\n\r\n  public ngOnDestroy(): void {\r\n    this.domMutationObserver.disconnect();\r\n  }\r\n\r\n  public scrollTo(position: number): void {\r\n    this.state.scrollStreamActive = false;\r\n    this.renderer.setProperty(this.el.nativeElement, 'scrollTop', position);\r\n    this.state.scrollStreamActive = true;\r\n  }\r\n\r\n  public onScrollbarHeightChanged(): void {\r\n    this.scrollHeightChanged.next();\r\n  }\r\n\r\n  private registerScrollEventHandler(): void {\r\n    this.scrollChanged = fromEvent(this.el.nativeElement, 'scroll');\r\n  }\r\n\r\n  private registerMutationObserver(): void {\r\n    this.domMutationObserver = new MutationObserver(\r\n      (mutations: MutationRecord[]) => {\r\n        this.domMutationEmitter.next(mutations);\r\n      });\r\n\r\n    const config = { attributes: true, childList: true, characterData: true };\r\n    this.domMutationObserver.observe(this.el.nativeElement, config);\r\n  }\r\n\r\n  private registerInitialScrollPostionHandler(): void {\r\n    this.domMutationEmitter.pipe(\r\n      takeWhile(() => this.state.initMode),\r\n      debounceTime(this.scrollDebounceTimeAfterDOMMutationOnInit)\r\n    ).subscribe(() => {\r\n      this.scrollingStrategy.setInitialScrollPosition();\r\n      this.state.initMode = false;\r\n    });\r\n  }\r\n\r\n  private registerPreviousScrollPositionHandler(): void {\r\n    zip(\r\n      this.scrollRequestZoneChanged,\r\n      this.scrollHeightChanged\r\n    ).pipe(\r\n      skipWhile(() => this.state.initMode),\r\n      debounceTime(this.scrollDebounceTimeAfterScrollHeightChanged)\r\n    ).subscribe(() => {\r\n      this.scrollingStrategy.setPreviousScrollPosition();\r\n      this.state.previousScrollPositionpUpdated = true;\r\n    });\r\n  }\r\n\r\n  private registerScrollSpy(): void {\r\n    this.scrollRequestZoneChanged.subscribe(() => {\r\n      this.scrollingStrategy.askForUpdate();\r\n    });\r\n  }\r\n\r\n  private useStrategy(): void {\r\n    switch (this.strategy) {\r\n      case 'scrollingToBoth':\r\n        this.scrollingStrategy = new ScrollingToBoth(this, this.state);\r\n        break;\r\n      case 'scrollingToTop':\r\n        this.scrollingStrategy = new ScrollingToTop(this, this.state);\r\n        break;\r\n      case 'scrollingToBottom': default:\r\n        this.scrollingStrategy = new ScrollingToBottom(this, this.state);\r\n        break;\r\n    }\r\n  }\r\n\r\n  private useScrollHeightListener(): void {\r\n    this.scrollHeightListener = new ScrollHeightListener(this, this.state);\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\n\nimport { NgxInfiniteScrollerDirective } from './ngx-infinite-scroller.directive';\nimport { DirectiveStateService } from './directive-state.service';\n\n@NgModule({\n  declarations: [\n    NgxInfiniteScrollerDirective\n  ],\n  imports: [\n  ],\n  exports: [\n    NgxInfiniteScrollerDirective\n  ],\n  providers: [\n    DirectiveStateService\n  ],\n  bootstrap: []\n})\nexport class NgxInfiniteScrollerModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {DirectiveContext as Éµb} from './src/app/directive-context';\nexport {DirectiveStateService as Éµc} from './src/app/directive-state.service';\nexport {NgxInfiniteScrollerDirective as Éµa} from './src/app/ngx-infinite-scroller.directive';"],"names":["tslib_1.__extends","tslib_1.__decorate"],"mappings":"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"}